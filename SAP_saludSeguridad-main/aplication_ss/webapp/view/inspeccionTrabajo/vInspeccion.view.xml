<mvc:View controllerName="appss.aplicationss.controller.vInspeccion" 
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns:tab="sap.ui.table"
    xmlns:u="sap.ui.unified"
    xmlns="sap.m">
    <Page title="Editar Inspeccion" showNavButton="true" navButtonPress=".onPageBack" class="sapUiContentPadding sapUiResponsivePadding--header sapUiResponsivePadding--subHeader sapUiResponsivePadding--content sapUiResponsivePadding--footer">
		<headerContent>
			<Button id="btnSaveIns" icon="sap-icon://save" text="Guardar" press="updateInspeccion" type="Emphasized" />
		</headerContent> 
		<content>
            <VBox class="sapUiSmallMargin">
                <f:Form editable="true" binding="{path : 'myParam>/tempInspecciones'}" >
                    <!-- <f:toolbar>
                        <Toolbar> 
                            <ToolbarSpacer />
                            <Button text="Guardar" icon="sap-icon://save" type="Emphasized" /> 
                        </Toolbar>
                    </f:toolbar> -->
                    <f:layout>
                        <f:ResponsiveGridLayout
                            labelSpanXL="4"
                            labelSpanL="3"
                            labelSpanM="4"
                            labelSpanS="12"
                            adjustLabelSpan="false"
                            emptySpanXL="0"
                            emptySpanL="4"
                            emptySpanM="0"
                            emptySpanS="0"
                            columnsXL="2"
                            columnsL="1"
                            columnsM="1"
                            singleContainerFullSize="false" />
                    </f:layout>
                    <f:formContainers>
                        <f:FormContainer> 
                            <f:formElements>
                                <f:FormElement label="Codigo de inspección">
                                    <f:fields>
                                        <Input id="gInsp_codInsp" value="{myParam>ZINSPECCION}" enabled="false"/>
                                    </f:fields>
                                </f:FormElement>
                                <f:FormElement label="Gerencia">
                                    <f:fields> 
                                        <Input id="gInsp_gerencia" type="Text" value="{myParam>ZGERENCIA}" placeholder="Seleccione.." valueHelpRequest="changeZSYSO_GERENCIA" showSuggestion="true" showValueHelp="true"/>
                                        <Input id="gInsp_gerenciaText" value="{ parts: [{path: 'myParam>ZGERENCIA'}], formatter: '.changeDataGerencia'}" editable="false" />
                                    </f:fields>
                                </f:FormElement>
                                <f:FormElement label="Área">
                                    <f:fields>
                                        <Input id="gInsp_area" type="Text" value="{myParam>ZAREA}" placeholder="Seleccione.." valueHelpRequest="changeZSYSO_AREA" showSuggestion="true" showValueHelp="true"/>                                                        
                                        <Input id="gInsp_areaText" value="{ parts: [{path: 'myParam>ZAREA'}], formatter: '.changeDataArea'}" editable="false" />
                                    </f:fields>
                                </f:FormElement>
                                <f:FormElement label="Departamento">
                                    <f:fields> 
                                        <Input id="gInsp_departamento" type="Text" value="{myParam>ZDPTO}" placeholder="Seleccione.." valueHelpRequest="changeZSYSO_DPTO" showSuggestion="true" showValueHelp="true"/>
                                        <Input id="gInsp_departamentoText" value="{ parts: [{path: 'myParam>ZDPTO'}], formatter: '.changeDataDepartamento'}" editable="false" />
                                    </f:fields>
                                </f:FormElement>
                                <f:FormElement label="Fecha programada">
                                    <f:fields>
                                        <DatePicker id="gInsp_programada" value="{myParam>ZFEC_PROGRAM}" displayFormat="yyyy-MM-dd" valueFormat="yyyy-MM-dd" placeholder="Ingresar fecha"/>
                                    </f:fields>
                                </f:FormElement> 
                                <f:FormElement label="Categoría">
                                    <f:fields> 
                                        <Select forceSelection="false" items="{ path: 'myParam>/ZSYSO_CATEGORIA'}" selectedKey="{myParam>ZCATEGORIA}" showSecondaryValues= "true" id="gInsp_categoria"> 
                                            <core:ListItem key="{myParam>ZCATEGORIA}" text="{myParam>ZCATEGORIA}" additionalText="{myParam>ZDESCRIPCION}" />
                                        </Select>
                                    </f:fields>
                                </f:FormElement> 
                                <f:FormElement label="Tipo">
                                    <f:fields>
                                        <Select forceSelection="false" items="{ path: 'myParam>/dataTipo'}" selectedKey="{myParam>ZTIPO}" id="gInsp_tipo" >
                                            <core:Item key="{myParam>ZTIPO}" text="{myParam>name}"  />
                                        </Select>
                                    </f:fields>
                                </f:FormElement> 
                            </f:formElements>
                        </f:FormContainer> 
                        <f:FormContainer title="Datos complementarios"> 
                            <f:formElements>
                                <f:FormElement label="Fecha real">
                                    <f:fields>
                                        <DatePicker value="{myParam>ZFEC_REAL}" id="gInsp_fechaReal" displayFormat="yyyy-MM-dd" valueFormat="yyyy-MM-dd" placeholder="Ingresar fecha"/>  
                                    </f:fields>
                                </f:FormElement>
                                <f:FormElement label="Hora real">
                                    <f:fields> 
                                        <TimePicker value="{myParam>ZHOR_REAL}" id="gInsp_horaReal" change="handleChange" placeholder="Hora real" /> 
                                    </f:fields>
                                </f:FormElement>
                                <f:FormElement label="Acto inseguro o subestandar">
                                    <f:fields>
                                        <Input value="{myParam>ZACTO}" id="gInsp_actoI" /> 
                                    </f:fields>
                                </f:FormElement>
                                <f:FormElement label="Condición inseguro o subestandar">
                                    <f:fields>
                                        <Input value="{myParam>ZCONDICION}" id="gInsp_condicionI" /> 
                                    </f:fields>
                                </f:FormElement>
                                <f:FormElement label="Descripcion de hallazgo">
                                    <f:fields> 
                                        <TextArea value="{myParam>ZHALLAZGO}" id="gInsp_descHallazgo" change="handleChange" rows="4" /> 
                                    </f:fields>
                                </f:FormElement>  
                                <f:FormElement label="Acciones tomadas">
                                    <f:fields>
                                        <Input value="{myParam>ZACCIONES}" id="gInsp_accTomada" /> 
                                    </f:fields>
                                </f:FormElement>  
                                <f:FormElement label="Recomendaciones">
                                    <f:fields>
                                        <Input value="{myParam>ZRECOMENDACION}" id="gInsp_recomendacion" /> 
                                    </f:fields>
                                </f:FormElement>  
                                <f:FormElement label="Ubicación">
                                    <f:fields>
                                        <Input value="{myParam>ZUBICACION}" id="gInsp_ubicacion" /> 
                                    </f:fields>
                                </f:FormElement>  
                            </f:formElements>
                        </f:FormContainer> 

                        <f:FormContainer> 
                            <f:formElements> 
                                <f:FormElement label="Descripción de las causas que originaron el incidente">
                                    <f:fields>  <TextArea value="{myParam>ZCAUSAS}" id="gInsp_desCausaOrigen" rows="6" />  </f:fields>
                                </f:FormElement>   
                            </f:formElements>
                        </f:FormContainer> 
                    </f:formContainers>
                </f:Form>
            </VBox> 
            <!-- PERSONAL INVOLUCRADO -->
            <Panel id="panelPerInvolucrado" expandable="true" expanded="true" visible="false" headerText="Añadir" width="auto" class="sapUiResponsiveMargin">
                <headerToolbar>
                    <OverflowToolbar style="Clear">
                        <Title text="Nuevo personal involucrado" />
                        <ToolbarSpacer />
                         <Button text="Buscar" icon="sap-icon://employee-lookup" type="Emphasized" press="buscarTrabajador" />
                        <Button icon="sap-icon://save" press="savePerInvolucrado" text="Guardar" type="Emphasized" /> 
                        <Button icon="sap-icon://decline" press="cancelPerInvolucrado" text="Cancelar" type="Emphasized" /> 
                    </OverflowToolbar>
                </headerToolbar>
                <content>
                    <f:Form editable="true"> 
                        <f:layout>
                            <f:ResponsiveGridLayout
                                labelSpanXL="4"
                                labelSpanL="3"
                                labelSpanM="4"
                                labelSpanS="12"
                                adjustLabelSpan="false"
                                emptySpanXL="0"
                                emptySpanL="4"
                                emptySpanM="0"
                                emptySpanS="0"
                                columnsXL="2"
                                columnsL="1"
                                columnsM="1"
                                singleContainerFullSize="false" />
                        </f:layout>
                        <f:formContainers>
                            <f:FormContainer > 
                                <f:formElements>
                                    <f:FormElement label="Codigo de trabajador">
                                        <f:fields> <Input value="" id="perInv_codTrab"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Apellidos y nombres">
                                        <f:fields> <Input value="" id="perInv_fullName" editable="false"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="DNI">
                                        <f:fields> <Input value="" id="perInv_dni" editable="false"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Contratista">
                                        <f:fields> <Input value="" id="perInv_contratista" editable="false"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Puesto de trabajo">
                                        <f:fields> <Input value="" id="perInv_puestoTrb" editable="false"/> </f:fields>
                                    </f:FormElement>  
                                </f:formElements>
                            </f:FormContainer> 
                        </f:formContainers>
                    </f:Form> 
                </content>
            </Panel>
            <Panel id="panelPerInvolucradoEdit"  binding="{path : 'myParam>/temEditInvolucrado'}" expandable="true" expanded="true" visible="false" headerText="Añadir" width="auto" class="sapUiResponsiveMargin">
                <headerToolbar>
                    <OverflowToolbar style="Clear">
                        <Title text="Editar personal involucrado" />
                        <ToolbarSpacer />
                         <Button text="Buscar" icon="sap-icon://employee-lookup" type="Emphasized" press="buscarTrabajadorEdit" />
                        <Button icon="sap-icon://save" press="saveEditPerInvolucrado" text="Guardar" type="Emphasized" /> 
                        <Button icon="sap-icon://decline" press="cancelPerInvolucrado" text="Cancelar" type="Emphasized" /> 
                    </OverflowToolbar>
                </headerToolbar>
                <content>
                    <f:Form editable="true"> 
                        <f:layout>
                            <f:ResponsiveGridLayout
                                labelSpanXL="4"
                                labelSpanL="3"
                                labelSpanM="4"
                                labelSpanS="12"
                                adjustLabelSpan="false"
                                emptySpanXL="0"
                                emptySpanL="4"
                                emptySpanM="0"
                                emptySpanS="0"
                                columnsXL="2"
                                columnsL="1"
                                columnsM="1"
                                singleContainerFullSize="false" />
                        </f:layout>
                        <f:formContainers>
                            <f:FormContainer > 
                                <f:formElements>
                                    <f:FormElement label="Codigo de trabajador">
                                        <f:fields> <Input value="{myParam>ZID_TRAB_LAREDO}" id="edit_perInv_codTrab"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Apellidos y nombres">
                                        <f:fields> <Input value="{myParam>ZAPELLIDO_NOMBRE}" id="edit_perInv_fullName" editable="false"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="DNI">
                                        <f:fields> <Input value="{myParam>ZDNI}" id="edit_perInv_dni" editable="false"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Contratista">
                                        <f:fields> <Input value="{myParam>ZPROVEEDOR}" id="edit_perInv_contratista" editable="false"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Puesto de trabajo">
                                        <f:fields> <Input value="{myParam>ZPUESTO}" id="edit_perInv_puestoTrb" editable="false"/> </f:fields>
                                    </f:FormElement>  
                                </f:formElements>
                            </f:FormContainer> 
                        </f:formContainers>
                    </f:Form> 
                </content>
            </Panel>
            <tab:Table id="tablePersInvolucrado" showNoData="true" selectionMode="Single"  visibleRowCount="5" visibleRowCountMode ="Fixed" rows="{  path: 'myParam>/tabPerInvolucrados' }" class="sapUiSmallMargin">
                <tab:extension>
					<OverflowToolbar>
						<Title text="Datos del personal involucrado"/>
						<ToolbarSpacer/>
						<Button id="addPer" icon="sap-icon://add-employee" text="Agregar" press="addPerInvolucrado"/>
                        <Button id="editPer" icon="sap-icon://edit" text="Editar" press="editPerInvolucrado"/>
						<Button id="deletePer" icon="sap-icon://add-employee" text="Eliminar" press="deletePerInvolucrado"/>
					</OverflowToolbar>
				</tab:extension>
                <tab:columns>
                    <tab:Column autoResizable="true" width="auto">
                        <Label textAlign="Center" wrapping ="true" text="Codigo Personal" />
                        <tab:template> <Text text="{myParam>ZID_TRAB_LAREDO}" />  </tab:template>
                    </tab:Column>
                    <tab:Column autoResizable="true" width="auto">
                        <Label textAlign="Center" wrapping ="true" text="Apellidos y nombres" />
                        <tab:template> <Text text="{myParam>ZAPELLIDO_NOMBRE}" />  </tab:template>
                    </tab:Column>
                    <tab:Column autoResizable="true" width="auto">
                        <Label textAlign="Center" wrapping ="true" text="DNI" />
                        <tab:template> <Text text="{myParam>ZDNI}" /> </tab:template>
                    </tab:Column>
                    <tab:Column autoResizable="true" width="auto">
                        <Label textAlign="Center" wrapping ="true" text="Contratista" />
                        <tab:template> <Text text="{myParam>ZPROVEEDOR}" /> </tab:template>
                    </tab:Column>
                    <tab:Column autoResizable="true" width="auto">
                        <Label textAlign="Center" wrapping ="true" text="Puesto de trabajo" />
                        <tab:template> <Text text="{myParam>ZPUESTO}" /> </tab:template>
                    </tab:Column> 
                </tab:columns>
            </tab:Table>
            <!-- RIESGOS ASOCIADOS -->
            <Panel id="panelRiAsociados" expandable="true" expanded="true" visible="false" headerText="Añadir" width="auto" class="sapUiResponsiveMargin">
                <headerToolbar>
                    <OverflowToolbar style="Clear">
                        <Title text="Nuevo riesgo asociado" />
                        <ToolbarSpacer />
                        <Button icon="sap-icon://save" press="saveRiAsociados" text="Guardar" type="Emphasized" /> 
                        <Button icon="sap-icon://decline" press="cancelRiAsociados" text="Cancelar" type="Emphasized" /> 
                    </OverflowToolbar>
                </headerToolbar>
                <content>
                    <f:Form editable="true"> 
                        <f:layout>
                            <f:ResponsiveGridLayout
                                labelSpanXL="4"
                                labelSpanL="3"
                                labelSpanM="4"
                                labelSpanS="12"
                                adjustLabelSpan="false"
                                emptySpanXL="0"
                                emptySpanL="4"
                                emptySpanM="0"
                                emptySpanS="0"
                                columnsXL="2"
                                columnsL="1"
                                columnsM="1"
                                singleContainerFullSize="false" />
                        </f:layout>
                        <f:formContainers>
                            <f:FormContainer > 
                                <f:formElements>
                                    <f:FormElement label="Condición insegura">
                                        <f:fields> <Input value="" id="riAsoc_conInsegura"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Riesgo">
                                        <f:fields> <Input value="" id="riAsoc_riesgo"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Consecuencias">
                                        <f:fields> <Input value="" id="riAsoc_consecuencia"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Nivel riesgo">
                                        <f:fields> <Input value="" id="riAsoc_nivelRiesgo"/> </f:fields>
                                    </f:FormElement>  
                                    <f:FormElement label="Anexo">
                                        <f:fields> 
                                            <u:FileUploader id="riAsoc_file" name="myFileUpload" uploadUrl="upload/" tooltip="Subir archivo" change="onFileSelected"/>
                                        </f:fields>
                                    </f:FormElement>  
                                </f:formElements>
                            </f:FormContainer> 
                        </f:formContainers>
                    </f:Form> 
                </content>
            </Panel>
            <Panel id="panelRiAsociadosEdit" binding="{path : 'myParam>/temEditRiAsociados'}" expandable="true" expanded="true" visible="false" headerText="Añadir" width="auto" class="sapUiResponsiveMargin">
                <headerToolbar>
                    <OverflowToolbar style="Clear">
                        <Title text="Editar riesgo asociado" />
                        <ToolbarSpacer />
                        <Button icon="sap-icon://save" press="saveEditRiAsociados" text="Guardar" type="Emphasized" /> 
                        <Button icon="sap-icon://decline" press="cancelRiAsociados" text="Cancelar" type="Emphasized" /> 
                    </OverflowToolbar>
                </headerToolbar>
                <content>
                    <f:Form editable="true"> 
                        <f:layout>
                            <f:ResponsiveGridLayout
                                labelSpanXL="4"
                                labelSpanL="3"
                                labelSpanM="4"
                                labelSpanS="12"
                                adjustLabelSpan="false"
                                emptySpanXL="0"
                                emptySpanL="4"
                                emptySpanM="0"
                                emptySpanS="0"
                                columnsXL="2"
                                columnsL="1"
                                columnsM="1"
                                singleContainerFullSize="false" />
                        </f:layout>
                        <f:formContainers>
                            <f:FormContainer > 
                                <f:formElements>
                                    <f:FormElement label="Condición insegura">
                                        <f:fields> <Input value="{myParam>ZCOND_INSEGURA}" id="edit_riAsoc_conInsegura"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Riesgo">
                                        <f:fields> <Input value="{myParam>ZRIESGO}" id="edit_riAsoc_riesgo"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Consecuencias">
                                        <f:fields> <Input value="{myParam>ZCONSECUENCIA}" id="edit_riAsoc_consecuencia"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Nivel riesgo">
                                        <f:fields> <Input value="{myParam>ZNIVEL_RIESGO}" id="edit_riAsoc_nivelRiesgo"/> </f:fields>
                                    </f:FormElement>  
                                    <f:FormElement label="Anexo">
                                        <f:fields> 
                                            <u:FileUploader value="{myParam>ZANEXO}" id="edit_riAsoc_file" name="myFileUpload" uploadUrl="upload/" tooltip="Subir archivo" change="onFileSelected"/>
                                        </f:fields>
                                    </f:FormElement>  
                                </f:formElements>
                            </f:FormContainer> 
                        </f:formContainers>
                    </f:Form> 
                </content>
            </Panel>
            <tab:Table id="tableRiesgosAsociados" showNoData="true" selectionMode="Single"  visibleRowCount="5" visibleRowCountMode ="Fixed" rows="{  path: 'myParam>/tabRiAsociados' }" class="sapUiSmallMargin">
                <tab:extension>
					<OverflowToolbar>
						<Title text="Riesgos asociados"/>
						<ToolbarSpacer/>
                        <Button id="addRisA" icon="sap-icon://add-employee" text="Agregar" press="addRiAsociados"/>
                        <Button id="editRisA" icon="sap-icon://edit" text="Editar" press="editRiAsociados"/>
                        <Button id="deleteRisA" icon="sap-icon://add-employee" text="Eliminar" press="deleteRiAsociados"/>
					</OverflowToolbar>
				</tab:extension>
                <tab:columns>
                    <tab:Column autoResizable="true" width="auto">
                        <Label textAlign="Center" wrapping ="true"  text="Condición insegura" />
                        <tab:template> <Text text="{myParam>ZCOND_INSEGURA}" />  </tab:template>
                    </tab:Column>
                    <tab:Column autoResizable="true" width="auto">
                        <Label textAlign="Center" wrapping ="true"  text="Riesgo" />
                        <tab:template> <Text text="{myParam>ZRIESGO}" /> </tab:template>
                    </tab:Column>
                    <tab:Column autoResizable="true" width="auto">
                        <Label textAlign="Center" wrapping ="true"  text="Consecuencia" />
                        <tab:template> <Text text="{myParam>ZCONSECUENCIA}" /> </tab:template>
                    </tab:Column>
                    <tab:Column autoResizable="true" width="auto">
                        <Label textAlign="Center" wrapping ="true"  text="Nivel riesgo" />
                        <tab:template> <Text text="{myParam>ZNIVEL_RIESGO}" /> </tab:template>
                    </tab:Column>
                    <tab:Column autoResizable="true" width="auto">
                        <Label textAlign="Center" wrapping ="true"  text="Anexo" />
                        <tab:template> <Link text="{myParam>ZANEXO}" press="handleLinkPress" />  </tab:template>
                    
                    </tab:Column>
                </tab:columns>
            </tab:Table> 
            <!-- MEDIDAS CORRECTIVAS -->
            <Panel id="panelMedCorrectiva" expandable="true" expanded="true" visible="false" headerText="Añadir" width="auto" class="sapUiResponsiveMargin">
                <headerToolbar>
                    <OverflowToolbar style="Clear">
                        <Title text="Nuevo medida correctiva" />
                        <ToolbarSpacer />
                        <Button icon="sap-icon://save" press="saveMedCorrectiva" text="Guardar" type="Emphasized" /> 
                        <Button icon="sap-icon://decline" press="cancelMedCorrectiva" text="Cancelar" type="Emphasized" /> 
                    </OverflowToolbar>
                </headerToolbar>
                <content>
                    <f:Form editable="true"> 
                        <f:layout>
                            <f:ResponsiveGridLayout
                                labelSpanXL="4"
                                labelSpanL="3"
                                labelSpanM="4"
                                labelSpanS="12"
                                adjustLabelSpan="false"
                                emptySpanXL="0"
                                emptySpanL="4"
                                emptySpanM="0"
                                emptySpanS="0"
                                columnsXL="2"
                                columnsL="1"
                                columnsM="1"
                                singleContainerFullSize="false" />
                        </f:layout>
                        <f:formContainers>
                            <f:FormContainer > 
                                <f:formElements>
                                    <f:FormElement label="Descripción de la medida correctiva">
                                        <f:fields> <Input value="" id="medCor_descrip"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Responsable">
                                        <f:fields> <Input value="" id="medCor_responsable"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Fecha de ejecución">
                                        <f:fields> 
                                            <DatePicker id="medCor_fechaEjc" value="" displayFormat="yyyy-MM-dd" valueFormat="yyyy-MM-dd" change="handleChange"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Estado de acción correctiva">
                                        <f:fields> 
                                        <Select id="medCor_estadoAccCor" items="{ path: 'myParam>/estadoAccionCorrectiva' }" width="100%">
                                            <core:ListItem key="{myParam>key}" text="{myParam>state}"/>
                                        </Select> 
                                        </f:fields>
                                    </f:FormElement>  
                                </f:formElements>
                            </f:FormContainer> 
                        </f:formContainers>
                    </f:Form> 
                </content>
            </Panel>
            <Panel id="panelMedCorrectivaEdit"  binding="{path : 'myParam>/temEditMedCorrectiva'}" expandable="true" expanded="true" visible="false" headerText="Añadir" width="auto" class="sapUiResponsiveMargin">
                <headerToolbar>
                    <OverflowToolbar style="Clear">
                        <Title text="Editar medida correctiva" />
                        <ToolbarSpacer />
                        <Button icon="sap-icon://save" press="saveEditMedCorrectiva" text="Guardar" type="Emphasized" /> 
                        <Button icon="sap-icon://decline" press="cancelMedCorrectiva" text="Cancelar" type="Emphasized" /> 
                    </OverflowToolbar>
                </headerToolbar>
                <content>
                    <f:Form editable="true"> 
                        <f:layout>
                            <f:ResponsiveGridLayout
                                labelSpanXL="4"
                                labelSpanL="3"
                                labelSpanM="4"
                                labelSpanS="12"
                                adjustLabelSpan="false"
                                emptySpanXL="0"
                                emptySpanL="4"
                                emptySpanM="0"
                                emptySpanS="0"
                                columnsXL="2"
                                columnsL="1"
                                columnsM="1"
                                singleContainerFullSize="false" />
                        </f:layout>
                        <f:formContainers>
                            <f:FormContainer > 
                                <f:formElements>
                                    <f:FormElement label="Descripción de la medida correctiva">
                                        <f:fields> <Input value="{myParam>ZMEDIDA}" id="edit_medCor_descrip"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Responsable">
                                        <f:fields> <Input value="{myParam>ZRESPONSABLE}" id="edit_medCor_responsable"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Fecha de ejecución">
                                        <f:fields> 
                                            <DatePicker id="edit_medCor_fechaEjc" value="{myParam>ZFEC_EJECUCION}" displayFormat="yyyy-MM-dd" valueFormat="yyyy-MM-dd" change="handleChange"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Estado de acción correctiva">
                                        <f:fields> 
                                        <Select id="edit_medCor_estadoAccCor" selectedKey="{myParam>ZESTADO}" items="{ path: 'myParam>/estadoAccionCorrectiva' }" width="100%">
                                            <core:ListItem key="{myParam>key}" text="{myParam>state}"/>
                                        </Select> 
                                        </f:fields>
                                    </f:FormElement>  
                                </f:formElements>
                            </f:FormContainer> 
                        </f:formContainers>
                    </f:Form> 
                </content>
            </Panel>
            <tab:Table id="tableMedidaCorrectiva" showNoData="true" selectionMode="Single"  visibleRowCount="5" visibleRowCountMode ="Fixed" rows="{  path: 'myParam>/tabMedCorrectiva' }" class="sapUiSmallMargin">
                <tab:extension>
					<OverflowToolbar>
						<Title text="Medidas correctivas"/> 
                        <ToolbarSpacer/>
						<Button id="addMed" icon="sap-icon://add-employee" text="Agregar" press="addMedCorrectiva"/>
                        <Button id="editMed" icon="sap-icon://edit" text="Editar" press="editMedCorrectiva"/>
						<Button id="deleteMed" icon="sap-icon://add-employee" text="Eliminar" press="deleteMedCorrectiva"/>
					</OverflowToolbar>
				</tab:extension>
                <tab:columns>
                    <tab:Column autoResizable="true" width="auto">
                        <Label textAlign="Center" wrapping ="true"  text="Descripción de la medida correctiva" />
                        <tab:template> <Text text="{myParam>ZMEDIDA}"/>  </tab:template>
                    </tab:Column>
                    <tab:Column autoResizable="true" width="auto">
                        <Label textAlign="Center" wrapping ="true"  text="Responsable" />
                        <tab:template> <Text text="{myParam>ZRESPONSABLE}" /> </tab:template>
                    </tab:Column>
                    <tab:Column autoResizable="true" width="auto">
                        <Label textAlign="Center" wrapping ="true"  text="Fecha de ejecución" />
                        <tab:template> <Text text="{myParam>ZFEC_EJECUCION}"/>  </tab:template>
                    </tab:Column>
                    <tab:Column autoResizable="true" width="auto">
                        <Label textAlign="Center" wrapping ="true"  text="Estado de acción correctiva" />
                        <tab:template> 
                            <Text text="{ parts: [{path: 'myParam>ZESTADO'},{ path: 'myParam>/estadoAccionCorrectiva' }], formatter: '.keyValorEstadoAccionCorrectiva'}"/>
                         </tab:template>
                    </tab:Column>
                </tab:columns>
            </tab:Table>
            <!-- RESPONSABLES DE REGISTROS -->
            <Panel id="panelResponsables" expandable="true" expanded="true" visible="false" headerText="Añadir" width="auto" class="sapUiResponsiveMargin">
                <headerToolbar>
                    <OverflowToolbar style="Clear">
                        <Title text="Nuevo responsables del registro" />
                        <ToolbarSpacer />
                        <Button text="Buscar" icon="sap-icon://employee-lookup" type="Emphasized" press="buscarTrabajadorRes" />
                        <Button icon="sap-icon://save" press="saveResponsables" text="Guardar" type="Emphasized" /> 
                        <Button icon="sap-icon://decline" press="cancelResponsables" text="Cancelar" type="Emphasized" /> 
                    </OverflowToolbar>
                </headerToolbar>
                <content>
                    <f:Form editable="true"> 
                        <f:layout>
                            <f:ResponsiveGridLayout
                                labelSpanXL="4"
                                labelSpanL="3"
                                labelSpanM="4"
                                labelSpanS="12"
                                adjustLabelSpan="false"
                                emptySpanXL="0"
                                emptySpanL="4"
                                emptySpanM="0"
                                emptySpanS="0"
                                columnsXL="2"
                                columnsL="1"
                                columnsM="1"
                                singleContainerFullSize="false" />
                        </f:layout>
                        <f:formContainers>
                            <f:FormContainer > 
                                <f:formElements>
                                    <f:FormElement label="Codigo trabajador">
                                        <f:fields> <Input value="" id="codTrabajador"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Nombre">
                                        <f:fields> <Input value="" id="responsable_nombre"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Cargo">
                                        <f:fields> <Input value="" id="responsable_cargo"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Fecha">
                                        <f:fields> <DatePicker id="responsable_fecha" value=""  displayFormat="yyyy-MM-dd" valueFormat="yyyy-MM-dd"/> </f:fields>
                                    </f:FormElement> 
                                </f:formElements>
                            </f:FormContainer> 
                        </f:formContainers>
                    </f:Form> 
                </content>
            </Panel>
            <Panel id="panelResponsablesEdit"  binding="{path : 'myParam>/temEditResponsables'}" expandable="true" expanded="true" visible="false" headerText="Añadir" width="auto" class="sapUiResponsiveMargin">
                <headerToolbar>
                    <OverflowToolbar style="Clear">
                        <Title text="Nuevo responsables del registro" />
                        <ToolbarSpacer />
                        <Button text="Buscar" icon="sap-icon://employee-lookup" type="Emphasized" press="buscarTrabajadorResEdit" />
                        <Button icon="sap-icon://save" press="saveEditResponsables" text="Guardar" type="Emphasized" /> 
                        <Button icon="sap-icon://decline" press="cancelResponsables" text="Cancelar" type="Emphasized" /> 
                    </OverflowToolbar>
                </headerToolbar>
                <content>
                    <f:Form editable="true"> 
                        <f:layout>
                            <f:ResponsiveGridLayout
                                labelSpanXL="4"
                                labelSpanL="3"
                                labelSpanM="4"
                                labelSpanS="12"
                                adjustLabelSpan="false"
                                emptySpanXL="0"
                                emptySpanL="4"
                                emptySpanM="0"
                                emptySpanS="0"
                                columnsXL="2"
                                columnsL="1"
                                columnsM="1"
                                singleContainerFullSize="false" />
                        </f:layout>
                        <f:formContainers>
                            <f:FormContainer > 
                                <f:formElements>
                                    <f:FormElement label="Codigo trabajador">
                                        <f:fields> <Input value="" id="edit_codTrabajador"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Nombre">
                                        <f:fields> <Input value="{myParam>ZAPELLIDO_NOMBRE}" id="edit_responsable_nombre"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Cargo">
                                        <f:fields> <Input value="{myParam>ZCARGO}" id="edit_responsable_cargo"/> </f:fields>
                                    </f:FormElement> 
                                    <f:FormElement label="Fecha">
                                        <f:fields> <DatePicker id="edit_responsable_fecha" value="{myParam>ZFECHA}"  displayFormat="yyyy-MM-dd" valueFormat="yyyy-MM-dd"/> </f:fields>
                                    </f:FormElement> 
                                </f:formElements>
                            </f:FormContainer> 
                        </f:formContainers>
                    </f:Form> 
                </content>
            </Panel>
            <tab:Table id="idTableResponsable"  showNoData="true" selectionMode="Single"  visibleRowCount="5" visibleRowCountMode ="Fixed" rows="{  path: 'myParam>/tabResponsables' }" class="sapUiSmallMargin">
                <tab:extension>
					<OverflowToolbar>
						<Title text="Responsables del registro"/>
                        <ToolbarSpacer/>
						<Button id="addRes" icon="sap-icon://add-employee" text="Agregar" press="addResponsables"/>
                        <Button id="editRes" icon="sap-icon://edit" text="Editar" press="editResponsables"/>
                        <Button id="deleteRes" icon="sap-icon://add-employee" text="Eliminar" press="deleteResponsables"/>
					</OverflowToolbar>
				</tab:extension>
                <tab:columns>
                    <tab:Column autoResizable="true" width="auto">
                        <Label textAlign="Center" wrapping ="true"  text="Nombre" />
                        <tab:template> <Text text="{myParam>ZAPELLIDO_NOMBRE}" />  </tab:template>
                    </tab:Column>
                    <tab:Column autoResizable="true" width="auto">
                        <Label textAlign="Center" wrapping ="true"  text="Cargo" />
                        <tab:template> <Text text="{myParam>ZCARGO}" /> </tab:template>
                    </tab:Column>
                    <tab:Column autoResizable="true" width="auto">
                        <Label textAlign="Center" wrapping ="true"  text="Fecha" />
                        <tab:template> <Text text="{myParam>ZFECHA}" />  </tab:template>
                    </tab:Column> 
                </tab:columns>
            </tab:Table>

		</content>
	</Page>
</mvc:View>
